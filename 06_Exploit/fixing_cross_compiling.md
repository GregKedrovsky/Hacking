# Fixing & Cross-Compiling Exploits

## Contents
- [](#)

## Fixing Exploits

- When you find and download (or mirror/copy) and exploit, it may not work right out of the box. You may have to tweak some things...
- Open the exploit file (Python, Bash, Perl, C, whatever) and look through the code.
  - You should be able to get a general idea of what the code does.
  - But also look specifically for **_comments_** that indicate things you need to change (LHOST, LPORT, etc.).
- You can run the exploit, using the syntax example as your go-by. If it doesn't work, you need to open that file again and look through the code.

## Cross-Compiling Exploits

### What is Cross-Compiling?
- In certain cases exploit code will be developed in C, C++, C#, etc.
- As a result you will ned to compile the exploit code into a "portable executable" (PB), or binary.
- Cross-compiling is the process of compiling code for a platform other than the one performing the compilation.
- As a pentester you will need to have the skills necessary to compile exploit code developed in C.

### Compiling Windows Exploits
- You can compile a 32-bit version or a 64-bit version of the exploit.
- If you don't know what your target architecture is, compile the 32-bit version since it will run on both architectures.
- Copy the exploit to a working directory and open the source code file in vim to look it over.
  - Often the author will include helpful comments (e.g., how to compile his code with Mingw-w64)

#### How to compile a 64-bit version:
```
i686-w64-mingw32-gcc 9303.c -o exploit
```
- If you don't get any error messages, the compilation was succcessful.
- The output should be "exploit.exe".

#### How to compile a 32-bit version:
```
i686-w64-mingw32-gcc 9303.c -o exploit -lws2_32
```
- The output should be "exploit.exe" (32-bit version)

### Compiling Linux Exploits
- Copy the file over to your working directory and open the source code file in vim to look it over.
- Look through the code to see if there are variable you need to change, or can change (if you want different values).
- Example of compiling syntax provided the code author in the comments of the code: 
```
gcc -pcthread dirty.c -o dirty -lcrypt  
```
- If you don't get any errors, the compilation completed successfully.
- This will output an "elf" binary named dirty.
  - "elf" = Executable and Linkable Format
  - This executable type is supposedly cross-platform (Linux, gaming consoles, mobile phones, etc.)
  - This is the executable type you need for Linux.
  - Windows only uses this format in its Windows Subsystem for Linux compatibility system.
 
## [Pre-Compiled Binaries](https://gitlab.com/exploit-database/exploitdb-bin-sploits/-/tree/main)
- You could also search for the pre-compiled binary from: exploitdb-bin-sploits
- This is OffSec's repo of pre-compiled binaries.
- Mostly Windows binaries with a few Linux binaries.
- You can use these pre-compiled binaries instead of compiling yourself (which is oftentimes problematic).
- All the binaries are listed by EDB-ID numbers.
