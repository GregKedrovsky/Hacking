# Linux: Automating Local Enumeration
> This is post-exploitation. We are assuming you have compromised a Linux target and have unprivileged access.

The previous sections dealt with manually enumerating the machine we compromised.
- Here we look at automating the process with tools.
- This will give us far more information much quicker that doing things manually.

## Contents
- [Intro](#intro)
- [Automation with Scripts](#automation-with-scripts)
  - 1
- [Automation with MetaSploit](#automation-with-metasploit)

## Intro

### Automating Linux Local Enumeration
- In addition to performing local enumeration manually, we can also automate the process with the help of a few scripts and MSF modules.
- While local enumeration techniques and commands are important to know, as a pentester you will need to be time efficient. As a result you will need to learn how to utilize various automated enumeration scripts.
- In addition to automating the process of enumerating information like system information, users & groups, etc. these automation enumeration scripts will also provide you with additional information regarding the target system, like:
  - Privilege escalation vulnerabilities
  - Locally stored passwords
  - Etc.

## Automation with Scripts

### [LinPeas](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS)

This is the ***all-time favorite*** "Linux Privilege Escalation Awsome Script"
- It does a bunch of stuff and spits out color-coordinated results.
- Very easy to download and install.
- It is a ".sh" script, so it will run in Bash (shell).

Run LinPEAS ***first*** in your post-exploit enumeration process (after your quick-and-dirty manual stuff, looking for the quick-win and low-hanging fruit).
- Find a writable folder on your target, download it, run it.
- If you don't get what you need, move on to another tool.
- This was updated last week (when I checked it on 12/14/2024)

Output: 
- Legend (toward the top of the output): gives you what the colors mean (red/yellow is awesome).
- Anything in ***red*** and especially ***red highlighted in yellow*** are things you need to look at.
- Scroll through and see what it found.

### [LinEnum](https://github.com/rebootuser/LinEnum)

This is another ".sh" file that will run in Bash (shell) with no dependency hell to resolve.
- It a simple bash script that automates common Linux local enumeration checks in addition to identifying privilege escalation vulnerabilities.
- Old: This has not been updated in five years...

#### Target `/tmp` dir
- Remember to use (or create and use) the /tmp dir on your target machine.
  - It must be writable.
- Keep everything here so you don't lose track of it and it's easy to clean up.

#### Obtain a Copy of LinEnum
- Go over to the [LinEnum GitHub repo](https://github.com/rebootuser/LinEnum).
- The script is called `linenum.sh`.
- The `README.md` file gives you man page info on how to utilize the script.
- Click on the linenumsh script link. Click on "Raw" in the top right. Select all and copy.
  - Copy the contents of that script file to a file on your target machine where you can execute it.
  - i.e., copy it to the /tmp dir
 
#### Execute LinEnum
- Get a shell (or interactive shell, etc.) on the target.
- Navigate to the /tmp dir where you stored the LinEnum script.
- `chmod 755 [filename]` the script file so it is executable.
- Execute the script: `./linenum.sh`

### [Linux Exploit Suggester](https://github.com/mzet-/linux-exploit-suggester)

Linux privilege escalation auditing tool. 
- This will also suggest exploits based on what it finds.
- Old-ish: This has not been updated in 10 months...

### [Linux Priv Checker](https://github.com/sleventyeleven/linuxprivchecker)

This is a Python script.
- Your target machine will have to have Python installed.
- Old: This has not been updated in 3 years...


## Automation with MetaSploit
> This is post-exploitation. We are assuming you have compromised a Linux target and have an unprivileged meterpreter session.

### Use Module: `enum_configs`
- Gather Linux configurations
- set session and run
- At the top: host name, Distro and version, kernel version
- All the information gathered is stored in text files.

### Use Module: `enum_network`
- Gather Linux network information
- set session and run
- All the information gathered is stored in text files.

### Use Module: `enum_system`
- Gather Linux system and user information
- set session and run
- You get: system info, cron jobs, disk info, installed packages, etc.
- All the information gathered is stored in text files. 

### Use Module: `checkvm`
- Check to see if the target (local) is a virtual machine
- Use the Linux version of the module
- set your session and run

