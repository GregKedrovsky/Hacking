# Linux - Initial Enumeration
> Assumption: You have hacked into the target box but only have low-level (user/service) access.

## Contents
- [Intro & Overview](#intro--overview)
  - [The 5 Stages of a Hack](#remember-the-5-stages-of-a-hack-here)
  - [Quick Wins](#quick-wins)
- [System Enumeration](#system-enumeration)
- [User Enumeration](#user-enumeration)
- [Network Enumeration](#network-enumeration)
- [Password Hunting](#password-hunting)

## Intro & Overview

### Remember the 5 Stages of a Hack ([here](../../00_Methodology_and_Resources#five-stages-of-ethical-hacking)):
1. Information Gathering
2. Scanning & Enumeration
3. Exploitation
4. Persistence
5. Covering Your Tracks

In order to have gained this low-level access, you had to work through the first three stages.
- Now you just need to repeat that same three-step process on this compromised machine.
- You need more ***enumeration*** so you know what you have, what you're looking at, what you have to work with.
  - We first look for the "quick wins" (the easy paths).
  - If we don't find one, then we dig deeper.
- And, as you come across new escalation paths, you'll need to enumerate there, also (so you know what you have, what you have to work with, etc.).

### Quick Wins:

Look for "quick wins" as soon as you gain access:
1. Find out who you are on the compromised machine.
2. Find out the architecture of the compromised machine.
3. Find out what sudo privileges you have.
4. Find out what history is available to me.

## System Enumeration

You just gained access to a machine, so you need to take a look at what you're working with: 
- Kernel Version (is it vulnerable to anything?)
- What architecture are we on (64-bit)?
- What services are running (because they also provide a potential attack surface)?

```
$ hostname
```
- Shows you the same hostname, same as follows the username@ in the prompt
- Sometimes this is important, especially in capture-the-flag scenarios.
  - Example: The HTB box named "Blue" might likely be an "EternalBlue" exploit. 
  - Example: A hostname of "Jerry" might be realted to a "Tomcat" exploit. 

```
$ uname -a
```
- This gives you distro and kernel version information (amd64 / x86_64 = 64-bit machine)
- This will give us information we can use to search with for kernel exploits. 
- Copy the Linux kernal version and Google exploits for it.

```
$ cat /proc/version  # similar information as uname
$ cat /etc/issue     # distro info
```

```
$ lscpu  # architecture info (64-bit cpu, threads, core count, vendor type, etc.)
```
- Some exploits require multiple threads and/or multiple cores.
- That dependency/requirement info can be found here

```
$  ps aux              # see what services are running
$  ps aux | grep root  # see what services are running as root
```
- This will show you services like cron, nginx, exim, apache, nfs (network file share), etc. 

## User Enumeration

We want to know: 
1. Who are we?
2. What permissions to do we have?
3. What are we capable of doing (sudo stuff)?

```
$ whoami  # this should give you the same username as in the prompt
$ id      # what our user id (UID) is, what our group id (GID) is; you also get user and group names
```

```
$ sudo -l  # this will list (-l) the allowed (and forbidden) command for the invoking user
```
- Make sure you always try: `sudo su -`
  - Uuse the compromised password for your compromised user whose account you are currently using
  - You never know--this would be a quick win!
- Something like this is very bad (but very good for us):

![image](https://github.com/user-attachments/assets/4de8362b-4878-430c-aa9e-87a3e19c8eaf)

```
$ cat /etc/group   # what groups are configured on the machine?
$ cat /etc/passwd  # this will give you the other users configured on the system
$ cat /etc/shadow  # password file
```
- If you have access to the shadow (password) file, that's bad (but good for us). 
- Grab the hash. Pass the hash. Crack the hash.

```
$ history  # display the command history for the current user
```
- Has this user done anything juicy in the past? 
- You may find a change in password and be able to read in plaintext the new password for something.

## Network Enumeration



## Password Hunting

